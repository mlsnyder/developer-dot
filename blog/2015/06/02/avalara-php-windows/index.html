<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
    <meta name="robots" content="index,follow" /> 

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Getting our PHP Samples Running on Windows | Avalara Developer</title>

    
    <meta name="description" content="API solutions for end-to-end tax compliance">

    
    <meta property="og:title" content="Getting our PHP Samples Running on Windows | Avalara Developer" />
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="Avalara Developer Network" />
    <meta property="og:description" content="API solutions for end-to-end tax compliance"/>

    <link rel="apple-touch-icon" sizes="57x57" href="/developer-dot/public/images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/developer-dot/public/images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/developer-dot/public/images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/developer-dot/public/images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/developer-dot/public/images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/developer-dot/public/images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/developer-dot/public/images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/developer-dot/public/images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/developer-dot/public/images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/developer-dot/public/images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/developer-dot/public/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/developer-dot/public/images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/developer-dot/public/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/developer-dot/public/images/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff ">
    <meta name="msapplication-TileImage" content="/developer-dot/public/images/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff ">

    <link rel="stylesheet" href="/developer-dot/public/css/style.css"> 
    <!-- Adobe Dynamic Tab Manager Tag Manager -->
    <script src="https://assets.adobedtm.com/bc10a2a9cf337c664f8f74e778a1987125aea184/satelliteLib-0387aefee1ddb8b2a9db7e4165c8d84dc0de8621.js"></script>
    <!-- End Adobe Dynamic Tab Manager Tag Manager -->
</head>
 

<body id="top" data-product=avaTax>
    <header>
        <div class="pageTitle">
            <a href="/developer-dot/">
                <img src="/developer-dot/public/images/Avalara_logo.svg" alt="Avalara Developer Network">
                <span>Developer</span>
            </a>
            <span class="slash">/&nbsp;</span><a href="/developer-dot/avatax">avaTax</a>
        </div>
        <nav class="navbar navbar-default navbar-static">
            <div class="navbar-header">
                <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".js-navbar-collapse">
                <span>Menu</span>
            </button>
            </div>
            <div class="collapse navbar-collapse js-navbar-collapse">
                <ul class="nav navbar-nav  ">
                    <li class="apis visible-xs-block"><a href="/developer-dot/avalara-apis"><span class="text-uppercase">API</span>s</a></li>
                    <li class="visible-xs-block"><a href="/developer-dot/avatax/dev-guide/"><span class="text-uppercase">AvaTax Developer Guide</span></a></li>
                    <li class="apis dropdown dropdown-large hidden-xs">
                        <a class="dropdown-toggle" data-toggle="dropdown"><span class="text-uppercase">API</span>s <i class="caret"></i></a>
                        <div class="dropdown-menu dropdown-menu-large">
                            <div class="row">
                                <div class="col-md-12"><a href="/developer-dot/avalara-apis">APIs overview</a></div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <h2>Tax calculation</h2>
                                    
                                    <h4>Avalara AvaTax</h4>
                                    <ul class="pipe">
                                        
                                        <li><a href="/developer-dot/avatax">Overview</a></li>
                                        
                                        <li><a href="/developer-dot/avatax/dev-guide">Developer Guide</a></li>
                                        
                                        <li><a href="/developer-dot/api-reference/avatax/rest/v2">API reference</a></li>
                                        
                                        <br/>
                                        <li><a href="/developer-dot/avatax/use-cases">Use Cases</a></li>
                                        <li><a href="/developer-dot/avatax/get-started">Start your AvaTax free trial now!</a></li>
                                    </ul>
                                     
                                    <h4>Avalara Communications</h4>
                                    <ul class="pipe">
                                        
                                        <li><a href="/developer-dot/communications">Overview</a></li>
                                        
                                        <li><a href="/developer-dot/api-reference/communications/afc-rest">API reference</a></li>
                                        
                                    </ul>
                                     
                                    <h4>Avalara Excise</h4>
                                    <ul class="pipe">
                                        
                                        <li><a href="/developer-dot/excise">Overview</a></li>
                                        
                                        <li><a href="/developer-dot/api-reference/excise/5_18_0">API reference</a></li>
                                        
                                    </ul>
                                    
                                </div>
                                <div class="col-sm-6">
                                    <h2>Compliance document management</h2>
                                    
                                    <h4>Avalara CertCapture</h4>
                                    <ul class="pipe">
                                        
                                        <li><a href="/developer-dot/certcapture">Overview</a></li>
                                        
                                        <li><a href="http://docs.certcapture6xrest.apiary.io/">API reference</a></li>
                                        
                                    </ul>
                                    
                                    <h2>Returns &amp; filing</h2>
                                     
                                    <h4>Avalara TrustFile</h4>
                                    <ul class="pipe">
                                        
                                        <li><a href="/developer-dot/trustfile">Overview</a></li>
                                        
                                        <li><a href="/developer-dot/api-reference/trustfile/api">API reference</a></li>
                                        
                                    </ul>
                                    
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="sdk dropdown dropdown-large hidden-xs">
                        <a class="dropdown-toggle" data-toggle="dropdown"><span class="text-uppercase">SDK</span> <b class="caret"></b></a>
                        <ul class="dropdown-menu dropdown-menu-large">
                            <li ><a href="/developer-dot/avatax/get-started">Get Started with AvaTax</a></li>
                            <br/>
                            <li><a href="/developer-dot/sdk/">The AvaTax SDK</a></li>
                            <li><a href="/developer-dot/sdk/soap">SOAP SDK</a></li>
                            <br/>
                            <li><a target="_blank" href="https://www.nuget.org/packages/Avalara.AvaTax/">Install C# SDK via NuGet</a></li>
                            <li><a target="_blank" href="http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22net.avalara.avatax%22">Install JRE SDK via Maven</a></li>
                            <li><a target="_blank" href="https://packagist.org/packages/avalara/avataxclient">Install PHP SDK via Composer</a></li>
                            <li><a target="_blank" href="https://rubygems.org/gems/avatax">Install Ruby SDK via RubyGems</a></li>
                            <li><a target="_blank" href="https://www.npmjs.com/package/avatax">Install JavaScript SDK via NPMJS</a></li>
                        </ul>
                    </li>
                    <li class="tests"><a href="/developer-dot/tests/testing-your-integration/"><span class="text-uppercase">Tests</span></a></li>
                    <!-- removing until the link to the Self-Test is fugured out -->
                    <!--
                    <li class="tests dropdown dropdown-large hidden-xs">
                        <a class="dropdown-toggle" data-toggle="dropdown"><span class="text-uppercase">Tests</span> <b class="caret"></b></a>
                        <ul class="dropdown-menu dropdown-menu-large">
                            <li><a href="/developer-dot/tests/self-test">Avalara Self-Test Tool</a></li>
                            <li><a href="/developer-dot/tests/testing-your-integration/">Avalara Test Cases</a></li>
                        </ul>
                    </li> -->

                    <li class="certification dropdown dropdown-large hidden-xs">
                        <a class="dropdown-toggel" data-toggle="dropdown"><span class="text-uppercase">Become Certified</span> <b class="caret"></b></a>
                        <ul class="dropdown-menu dropdown-menu-large">
                            <li><a href="/developer-dot/certification/">Overview</a></li>
                            <li><a href="/developer-dot/certification/avatax/">Avalara AvaTax</a></li>
                            <li><a href="/developer-dot/certification/communications-certification/">Avalara Communications</a></li>
                            <li><a href="/developer-dot/certification/excise/">Avalara Excise</a></li>
                            <li><a href="/developer-dot/certification/certcapture/">Avalara CertCapture</a></li>
                        </ul>
                    </li>
                    <li class="resources dropdown dropdown-large hidden-xs">
                        <a class="dropdown-toggle" data-toggle="dropdown"><span class="text-uppercase">Resources</span> <b class="caret"></b></a>
                        <ul class="dropdown-menu dropdown-menu-large">
                          <li><a href="/developer-dot/resources/support">Developer Support Options</a></li>
                          <li><a href="/developer-dot/blog">Developer Blog</a></li>
                          <li><a href="/developer-dot/resources/webinars">Webinars</a></li>
                          <!--<li><a href="/developer-dot/resources/preferred-developers">Preferred developers</a></li>-->
                          <li><a href="https://community.avalara.com/avalara/category_sets/developers">Help Forum</a></li>
                          <li><a href="https://avalaracommunity.force.com/partnerlaunch" target="_blank">Avalara Launch Center</a></li>
                        </ul>
                    </li>
                    <li class="resources visible-xs-block"><a href="/developer-dot/resources/support"><span class="text-uppercase">Developer Support Options</span></a></li>
                    <li class="resources visible-xs-block"><a href="/developer-dot/blog"><span class="text-uppercase">Developer Blog</span></a></li>
                    <!--<li class="resources visible-xs-block"><a href="/developer-dot/resources/preferred-developers"><span class="text-uppercase">Preferred developers</span></a></li>-->
                    <li class="resources visible-xs-block"><a href="https://community.avalara.com/avalara/category_sets/developers"><span class="text-uppercase">Help Forum</span></a></li>
                </ul>


                <a href="/developer-dot/avatax/signup/" class="btn btn-primary btn-signup">Free Trial</a>

            </div>
        </nav>
    </header>
    <div class="container-fluid blog">
        
        
        <section class="row padding-sides">
            <main class="col-md-12">
<div class="breadcrumbs blog">
    <div class="col-md-12">
        <ul class="pipe">
            <li class="text-uppercase">Resources</li>
            <li class="text-uppercase"><a href="/developer-dot/blog">Developer Blog</a></li>
            
            <li class="text-uppercase">Getting our PHP Samples Running on Windows</li>
            
        </ul>
    </div>
</div>
<br />



<div class="half">
    <h1>Getting our PHP Samples Running on Windows</h1>
    <p class="byline">By greg.bulmash | June 02, 2015</p>
    <p class="blog-content"><p><img src="/developer-dot/public/images/blog/zce_logo-150x150.jpg" alt="Zend Certified Engineer Logo" width="150" height="150" /> As I said in my <a href="/developer-dot/blog/2015/05/05/subject-so-much-new-we-cant-even-was-because-awesome">introduction</a>, I’m a <a href="http://www.zend.com/en/services/certification/php-5-certification">Zend Certified PHP Engineer</a>. I may not have mentioned that, like many developers, I tend to trust my abilities probably more than I should, jump into projects head first, and only start to <i>read the fine manual</i> when something doesn’t work as expected.</p>

<p>Setting up my Avalara laptop, one of the first things I did was install a basic WAMP stack (like <a href="http://en.wikipedia.org/wiki/LAMP_(software_bundle)">LAMP</a> but with Windows). That may be sacrilege to some, but it works.</p>

<p>When I had to write my first bit of code with the PHP sample libraries, I thought “I got this,” pulled the <a href="https://github.com/avadev/AvaTax-Calc-REST-PHP/">PHP REST for AvaTax samples</a> down from GitHub, and ran the <a href="https://github.com/avadev/AvaTax-Calc-REST-PHP/blob/master/Samples/PingTest.php">PingTest</a> sample in the browser.</p>

<p>It failed.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">Warning: require(vendor/autoload.php): failed to open stream: No such file or directory...</code></pre></figure>

<p>Yup, there’s no <code style="font-family: Courier, Courier New; font-size: 12px; font-weight: bold; background-color: #f0f0f0; border: 1px solid #bbb;">vendor</code> folder in there. Where did that come from? What had I missed?</p>
<h3>Step 1: You have to <i>install</i> our PHP samples</h3>
<p>I’d missed that this set of samples uses <a href="https://getcomposer.org/">Composer</a> for dependency management. If you haven’t already, go to the <a href="https://getcomposer.org/download/">Composer download page</a>, download the Windows installer, then run it.</p>

<p>It will set up Composer and make sure it’s in your Windows path. If you had any command windows open, they <strong>will not know</strong> about the changes to the Windows path. You’ll need to open a new one in the directory you downloaded our samples to. I recommend this handy shortcut:</p>

<p><img src="/developer-dot/public/images/blog/rightshiftclick-300x141.jpg" alt="shift + right click on a directory" width="300" height="141" /> In the File manager, hold down SHIFT while right-clicking the directory where your copy of the Avalara code is. You’ll see an option to “Open a command window here.” Choose it.</p>

<p>You can then run “<code style="font-family: Courier, Courier New; font-size: 12px; font-weight: bold; background-color: #f0f0f0; border: 1px solid #bbb;">composer install</code>” in the command window.</p>

<p>After that, you should be able to run the sample code… as long as you’ve set up your PHP installation with the proper root certificates so you can negotiate secure connections with HTTPS hosts. We provide a recommendation on <a href="/developer-dot/avatax/ssl-certificates">where to get and how to install the proper SSL root certificate to communicate with our servers</a>.</p>

<p>But <em>I am a certified PHP developer</em> and I know what I’m doing, right? So I installed the <a href="http://curl.haxx.se/ca/cacert.pem">Mozilla root certificate bundle</a>, saved it as <code style="font-family: Courier, Courier New; font-size: 12px; font-weight: bold; background-color: #f0f0f0; border: 1px solid #bbb;">cacert.pem</code> in my PHP installation directory, and linked it up in my PHP installation by adding the following to the end of my <code style="font-family: Courier, Courier New; font-size: 12px; font-weight: bold; background-color: #f0f0f0; border: 1px solid #bbb;">php.ini</code> file.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">[cURL]
curl.cainfo="C:\[path to php dir]\cacert.pem"</code></pre></figure>

<p>I downloaded a copy of Google’s homepage via a cURL call in PHP to test it. Boom. Ready to go.</p>

<p>I ran the <a href="https://github.com/avadev/AvaTax-Calc-REST-PHP/blob/master/Samples/PingTest.php">PingTest</a> sample again and it failed with multiple warnings like this:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">Warning: First parameter must either be an object or the name of an existing class in \Samples\src\AvaTax\EstimateTaxResult.php on line 41</code></pre></figure>

<h3>Step 2: Make sure you install our <i>recommended</i> root certificate</h3>
<p>A little debugging showed that despite having the root certificate bundle, I didn’t have the root certificate Avalara recommends. D’oh! I was getting that error because the HTTPS negotiation failed and there was no JSON response being returned.</p>

<p>So I went back to <a href="/developer-dot/avatax/ssl-certificates">our instructions</a>, added the recommended certificate to the bundle (cut and pasted the text into the end of the <code style="font-family: Courier, Courier New; font-size: 12px; font-weight: bold; background-color: #f0f0f0; border: 1px solid #bbb;">cacert.pem</code> file), and tried again.</p>

<figure class="highlight"><pre><code class="language-curl" data-lang="curl">PingTest Result: Error The user or account could not be authenticated.</code></pre></figure>

<p>Oh.</p>
<h3>Step 3: Put <i>your</i> data in configuration.php</h3>
<p>The <a style="font-family: Courier, Courier New; font-size: 12px; font-weight: bold; background-color: #f0f0f0; border: 1px solid #bbb;" href="https://github.com/avadev/AvaTax-Calc-REST-PHP/blob/master/Samples/configuration.php">configuration.php</a> file is in the Samples directory like the <a href="https://github.com/avadev/AvaTax-Calc-REST-PHP/blob/master/Samples/PingTest.php">PingTest</a> sample. You should have received an email with your account number and license key. If you didn’t or lost it, you can get a new key from the <a href="https://admin-development.avalara.net/AvaTax/Options/OptionsHome.aspx">settings tab of your Developer Console</a>.</p>

<p>Once you’ve put that information into <a style="font-family: Courier, Courier New; font-size: 12px; font-weight: bold; background-color: #f0f0f0; border: 1px solid #bbb;" href="https://github.com/avadev/AvaTax-Calc-REST-PHP/blob/master/Samples/configuration.php">configuration.php</a> and run the <a href="https://github.com/avadev/AvaTax-Calc-REST-PHP/blob/master/Samples/PingTest.php">PingTest</a>, you should get the following message:</p>

<figure class="highlight"><pre><code class="language-curl" data-lang="curl">PingTest Result: Success</code></pre></figure>

<p>And you’re on your way.</p>
</p>
    <p class="btn-callout"><a href="/developer-dot/blog" role="button">Back to posts</a></p>
    <div>
        <div>
    <!-- Begin MailChimp Signup Form -->
<link href="/developer-dot//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
	/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://avalara.us17.list-manage.com/subscribe/post?u=e2114eae65572ca4675c4ae37&amp;id=a37ce2da48" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">Want updates on the lastest blog posts? Sign up for our newsletter.</label>
    <div class="input-group">
        <input type="email" value="" name="EMAIL" class="form-control" id="mce-EMAIL" placeholder="Email Address" required/>
        <span class="input-group-btn">
            <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-default button"/>
        </span>
        <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
        <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_e2114eae65572ca4675c4ae37_a37ce2da48" tabindex="-1" value=""></div>
    </div>
    </div>
</form>
</div>

<!--End mc_embed_signup-->
</div>
    </div>
</div>

    
</main>
        </section>
         
    </div>
    <footer>
        <ul class="global">
            <li><a href="https://www.avalara.com/"><span class="icon-sphere"></span>Avalara.com</a></li>
            <li><a href="https://help.avalara.com/"><span class="icon-help"></span>Help Center</a></li>
        </ul>


        <ul class="social">
            <li class="twitter"><a href="https://twitter.com/avadev">Twitter</a></li>
            <li class="facebook"><a href="https://www.facebook.com/avalara">Facebook</a></li>
            <li class="linkedin"><a href="https://www.linkedin.com/company/avalara">LinkedIn</a></li>
            <li class="youtube"><a href="https://www.youtube.com/user/Avalara1">Youtube</a></li>
        </ul>
        
        


        <ul class="legal">
            <li>&copy; 2017 Avalara, Inc. All rights reserved</li>
            <li><a href="https://www.avalara.com/site-terms/">Terms of use</a></li>
            <li><a href="https://www.avalara.com/privacy-policy/">Privacy policy</a></li>
        </ul>

        <ul class="github">
            <li class="social github-icon"><a href="https://github.com/Avalara/developer-dot/edit/master/_posts/2015-06-02-avalara-php-windows.md"><span>GH</span> Edit this page on GitHub</a></li>

        </ul>
    </footer>

    <script src="/developer-dot/public/js/vendor/jquery-2.2.4.min.js"></script>
    <script src="/developer-dot/public/js/vendor/bootstrap.min.js"></script>
    <script src="/developer-dot/public/js/site.js"></script>

    
    <script src="/developer-dot/public/js/vendor/aws-sdk-2.5.3.min.js"></script>
    <script>
        AWS.config.region = 'us-west-2';
    </script>

     

    <!-- Adobe Dynamic Tag Manager -->
    <script type="text/javascript">
        _satellite.pageBottom();
    </script>
    <!-- End Adobe Dynamic Tag Manager -->
</body>

</html>
