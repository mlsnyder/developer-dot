<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
    <meta name="robots" content="index,follow" /> 

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>From REST v1 to REST v2 | Avalara Developer</title>

    
    <meta name="description" content="API solutions for end-to-end tax compliance">

    
    <meta property="og:title" content="From REST v1 to REST v2 | Avalara Developer" />
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="Avalara Developer Network" />
    <meta property="og:description" content="API solutions for end-to-end tax compliance"/>

    <link rel="apple-touch-icon" sizes="57x57" href="/developer-dot/public/images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/developer-dot/public/images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/developer-dot/public/images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/developer-dot/public/images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/developer-dot/public/images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/developer-dot/public/images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/developer-dot/public/images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/developer-dot/public/images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/developer-dot/public/images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/developer-dot/public/images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/developer-dot/public/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/developer-dot/public/images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/developer-dot/public/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/developer-dot/public/images/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff ">
    <meta name="msapplication-TileImage" content="/developer-dot/public/images/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff ">

    <link rel="stylesheet" href="/developer-dot/public/css/style.css"> 
    <!-- Adobe Dynamic Tab Manager Tag Manager -->
    <script src="https://assets.adobedtm.com/bc10a2a9cf337c664f8f74e778a1987125aea184/satelliteLib-0387aefee1ddb8b2a9db7e4165c8d84dc0de8621.js"></script>
    <!-- End Adobe Dynamic Tab Manager Tag Manager -->
</head>
 

<body id="top" data-product=blog>
    <header>
        <div class="pageTitle">
            <a href="/developer-dot/">
                <img src="/developer-dot/public/images/Avalara_logo.svg" alt="Avalara Developer Network">
                <span>Developer</span>
            </a>
            <span class="slash">/&nbsp;</span><a href="/developer-dot/blog">blog</a>
        </div>
        <nav class="navbar navbar-default navbar-static">
            <div class="navbar-header">
                <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".js-navbar-collapse">
                <span>Menu</span>
            </button>
            </div>
            <div class="collapse navbar-collapse js-navbar-collapse">
                <ul class="nav navbar-nav  ">
                    <li class="apis visible-xs-block"><a href="/developer-dot/avalara-apis"><span class="text-uppercase">API</span>s</a></li>
                    <li class="visible-xs-block"><a href="/developer-dot/avatax/dev-guide/"><span class="text-uppercase">AvaTax Developer Guide</span></a></li>
                    <li class="apis dropdown dropdown-large hidden-xs">
                        <a class="dropdown-toggle" data-toggle="dropdown"><span class="text-uppercase">API</span>s <i class="caret"></i></a>
                        <div class="dropdown-menu dropdown-menu-large">
                            <div class="row">
                                <div class="col-md-12"><a href="/developer-dot/avalara-apis">APIs overview</a></div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <h2>Tax calculation</h2>
                                    
                                    <h4>Avalara AvaTax</h4>
                                    <ul class="pipe">
                                        
                                        <li><a href="/developer-dot/avatax">Overview</a></li>
                                        
                                        <li><a href="/developer-dot/avatax/dev-guide">Developer Guide</a></li>
                                        
                                        <li><a href="/developer-dot/api-reference/avatax/rest/v2">API reference</a></li>
                                        
                                        <br/>
                                        <li><a href="/developer-dot/avatax/use-cases">Use Cases</a></li>
                                        <li><a href="/developer-dot/avatax/get-started">Start your AvaTax free trial now!</a></li>
                                    </ul>
                                     
                                    <h4>Avalara Communications</h4>
                                    <ul class="pipe">
                                        
                                        <li><a href="/developer-dot/communications">Overview</a></li>
                                        
                                        <li><a href="/developer-dot/api-reference/communications/afc-rest">API reference</a></li>
                                        
                                    </ul>
                                     
                                    <h4>Avalara Excise</h4>
                                    <ul class="pipe">
                                        
                                        <li><a href="/developer-dot/excise">Overview</a></li>
                                        
                                        <li><a href="/developer-dot/api-reference/excise/5_18_0">API reference</a></li>
                                        
                                    </ul>
                                    
                                </div>
                                <div class="col-sm-6">
                                    <h2>Compliance document management</h2>
                                    
                                    <h4>Avalara CertCapture</h4>
                                    <ul class="pipe">
                                        
                                        <li><a href="/developer-dot/certcapture">Overview</a></li>
                                        
                                        <li><a href="http://docs.certcapture6xrest.apiary.io/">API reference</a></li>
                                        
                                    </ul>
                                    
                                    <h2>Returns &amp; filing</h2>
                                     
                                    <h4>Avalara TrustFile</h4>
                                    <ul class="pipe">
                                        
                                        <li><a href="/developer-dot/trustfile">Overview</a></li>
                                        
                                        <li><a href="/developer-dot/api-reference/trustfile/api">API reference</a></li>
                                        
                                    </ul>
                                    
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="sdk dropdown dropdown-large hidden-xs">
                        <a class="dropdown-toggle" data-toggle="dropdown"><span class="text-uppercase">SDK</span> <b class="caret"></b></a>
                        <ul class="dropdown-menu dropdown-menu-large">
                            <li ><a href="/developer-dot/avatax/get-started">Get Started with AvaTax</a></li>
                            <br/>
                            <li><a href="/developer-dot/sdk/">The AvaTax SDK</a></li>
                            <li><a href="/developer-dot/sdk/soap">SOAP SDK</a></li>
                            <br/>
                            <li><a target="_blank" href="https://www.nuget.org/packages/Avalara.AvaTax/">Install C# SDK via NuGet</a></li>
                            <li><a target="_blank" href="http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22net.avalara.avatax%22">Install JRE SDK via Maven</a></li>
                            <li><a target="_blank" href="https://packagist.org/packages/avalara/avataxclient">Install PHP SDK via Composer</a></li>
                            <li><a target="_blank" href="https://rubygems.org/gems/avatax">Install Ruby SDK via RubyGems</a></li>
                            <li><a target="_blank" href="https://www.npmjs.com/package/avatax">Install JavaScript SDK via NPMJS</a></li>
                        </ul>
                    </li>
                    <li class="tests"><a href="/developer-dot/tests/testing-your-integration/"><span class="text-uppercase">Tests</span></a></li>
                    <!-- removing until the link to the Self-Test is fugured out -->
                    <!--
                    <li class="tests dropdown dropdown-large hidden-xs">
                        <a class="dropdown-toggle" data-toggle="dropdown"><span class="text-uppercase">Tests</span> <b class="caret"></b></a>
                        <ul class="dropdown-menu dropdown-menu-large">
                            <li><a href="/developer-dot/tests/self-test">Avalara Self-Test Tool</a></li>
                            <li><a href="/developer-dot/tests/testing-your-integration/">Avalara Test Cases</a></li>
                        </ul>
                    </li> -->

                    <li class="certification dropdown dropdown-large hidden-xs">
                        <a class="dropdown-toggel" data-toggle="dropdown"><span class="text-uppercase">Become Certified</span> <b class="caret"></b></a>
                        <ul class="dropdown-menu dropdown-menu-large">
                            <li><a href="/developer-dot/certification/">Overview</a></li>
                            <li><a href="/developer-dot/certification/avatax/">Avalara AvaTax</a></li>
                            <li><a href="/developer-dot/certification/communications-certification/">Avalara Communications</a></li>
                            <li><a href="/developer-dot/certification/excise/">Avalara Excise</a></li>
                            <li><a href="/developer-dot/certification/certcapture/">Avalara CertCapture</a></li>
                        </ul>
                    </li>
                    <li class="resources dropdown dropdown-large hidden-xs">
                        <a class="dropdown-toggle" data-toggle="dropdown"><span class="text-uppercase">Resources</span> <b class="caret"></b></a>
                        <ul class="dropdown-menu dropdown-menu-large">
                          <li><a href="/developer-dot/resources/support">Developer Support Options</a></li>
                          <li><a href="/developer-dot/blog">Developer Blog</a></li>
                          <li><a href="/developer-dot/resources/webinars">Webinars</a></li>
                          <!--<li><a href="/developer-dot/resources/preferred-developers">Preferred developers</a></li>-->
                          <li><a href="https://community.avalara.com/avalara/category_sets/developers">Help Forum</a></li>
                          <li><a href="https://avalaracommunity.force.com/partnerlaunch" target="_blank">Avalara Launch Center</a></li>
                        </ul>
                    </li>
                    <li class="resources visible-xs-block"><a href="/developer-dot/resources/support"><span class="text-uppercase">Developer Support Options</span></a></li>
                    <li class="resources visible-xs-block"><a href="/developer-dot/blog"><span class="text-uppercase">Developer Blog</span></a></li>
                    <!--<li class="resources visible-xs-block"><a href="/developer-dot/resources/preferred-developers"><span class="text-uppercase">Preferred developers</span></a></li>-->
                    <li class="resources visible-xs-block"><a href="https://community.avalara.com/avalara/category_sets/developers"><span class="text-uppercase">Help Forum</span></a></li>
                </ul>


                <a href="/developer-dot/avatax/signup/" class="btn btn-primary btn-signup">Free Trial</a>

            </div>
        </nav>
    </header>
    <div class="container-fluid blog">
        
        
        <section class="row padding-sides">
            <main class="col-md-12">
<div class="breadcrumbs blog">
    <div class="col-md-12">
        <ul class="pipe">
            <li class="text-uppercase">Resources</li>
            <li class="text-uppercase"><a href="/developer-dot/blog">Developer Blog</a></li>
            
            <li class="text-uppercase">From REST v1 to REST v2</li>
            
        </ul>
    </div>
</div>
<br />



<div class="half">
    <h1>From REST v1 to REST v2</h1>
    <p class="byline">By Joseph Savarese | January 05, 2017</p>
    <p class="blog-content"><h2 id="as-easy-as-v1-v2">As Easy as v1, v2…</h2>

<p>Well, not exactly, but it’s definitely easy to switch from our REST v1 to our REST v2 and the benefits are huge.
We’ve built a wide range of functionality into our new REST v2 API and all of that is in addition to everything our REST v1 had to offer.</p>

<p>To highlight some of the changes let’s first run through the various methods of our v1 and show exactly how they’ve changed in the upgraded v2. Then we can dive into some of those additions and look at how they’re intended to help users file and remit sales tax.</p>

<h3 id="from-v1-to-v2-overview">From v1 to v2 Overview</h3>

<ul>
  <li>
    <p><a href="#calculating-tax">Calculating Tax</a></p>
  </li>
  <li>
    <p><a href="#estimating-tax">Estimating Tax</a></p>
  </li>
  <li>
    <p><a href="#voiding-documents">Voiding Documents</a></p>
  </li>
  <li>
    <p><a href="#address-validation">Address Validation</a></p>
  </li>
  <li>
    <p><a href="#additional-v2-endpoints">New Methods</a></p>
  </li>
</ul>

<h4 id="calculating-tax">Calculating Tax</h4>

<p>Previously the endpoint used to calculate tax for transactions was <code class="highlighter-rouge">/1.0/tax/get</code> replaced in v2 by <code class="highlighter-rouge">/v2/transactions/create</code>. After including some minor changes to the request body parameters you will be able to POST new transactions in REST v2. The following shows an example request from both.</p>

<p><strong>v1 Request:</strong></p>

<p><code class="highlighter-rouge">POST development.avalara.net/1.0/tax/get</code></p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"Commit"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"CompanyCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"CustomerCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CUST1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"DocCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INV001"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"DocType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SalesInvoice"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"DocDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-01"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"Addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"AddressCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"Line1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"45 Fremont Street"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"City"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Chicago"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"Region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IL"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"Country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"PostalCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60602"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"Lines"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"LineNo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"DestinationCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"OriginCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"ItemCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nt">"TaxCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nt">"Qty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
</div>

<p><strong>v2 Request:</strong></p>

<p><code class="highlighter-rouge">POST //sandbox-rest.avatax.com/api/v2/transactions/create</code></p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"companyCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SalesInvoice"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-09-15T19:37:13.664Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"customerCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CUST1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"ShipFrom"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"line1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"700 Pike St"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Seattle"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98101"</span><span class="p">,</span><span class="w">
    </span><span class="err">}</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ShipTo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"line1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2200 Minor Ave"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Seattle"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98102"</span><span class="p">,</span><span class="w">
    </span><span class="err">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"lines"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="err">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"commit"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
</div>

<p>Switching from v1 to v2 is made simple, where as you can see, minus the enpoint, the requests are very similar. Though, through using our v2 I think you’ll notice that built into the REST v2 is much greater functionality and flexibility as we work to adhere to the unique circumstances each user faces. Here you’ll find more on our <a href="/developer-dot/blog/2016/11/18/types-of-transactions/">transaction types and their use</a>.</p>

<p>As an example, if you’d like to view the Invoices that you’ve created without having to login to the Admin Console, but rather by making a simple request instead. This action can be made using <code class="highlighter-rouge">GET //sandbox-rest.avatax.com/api/v2/companies/{companyCode}/transactions</code> to view the transactions made by the sought after company.</p>

<p><strong>Response:</strong></p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"@recordsetCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
  </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">55555555</span><span class="p">,</span><span class="w">
      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transactionCode"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"companyId"</span><span class="p">:</span><span class="w"> </span><span class="mi">4444444</span><span class="p">,</span><span class="w">
      </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-09-15T00:00:00"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"taxDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-09-15T00:00:00"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"paymentDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1900-01-01T00:00:00"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Saved"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SalesInvoice"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"batchCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nt">"currencyCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"customerUsageType"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nt">"customerVendorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CUST1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"exemptNo"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nt">"reconciled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"purchaseOrderNo"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nt">"salespersonCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nt">"taxOverrideType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"None"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"taxOverrideAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"taxOverrideReason"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nt">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nt">"totalExempt"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"totalTax"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.96</span><span class="p">,</span><span class="w">
      </span><span class="nt">"totalTaxable"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nt">"totalTaxCalculated"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.96</span><span class="p">,</span><span class="w">
      </span><span class="nt">"adjustmentReason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NotAdjusted"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"adjustmentDescription"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nt">"locked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"originAddressId"</span><span class="p">:</span><span class="w"> </span><span class="mi">11111111</span><span class="p">,</span><span class="w">
      </span><span class="nt">"destinationAddressId"</span><span class="p">:</span><span class="w"> </span><span class="mi">11111112</span><span class="p">,</span><span class="w">
      </span><span class="nt">"exchangeRateEffectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-09-15T00:00:00"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"exchangeRate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"isSellerImporterOfRecord"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"modifiedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-09-26T16:03:27.867"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"modifiedUserId"</span><span class="p">:</span><span class="w"> </span><span class="mi">333333</span><span class="p">,</span><span class="w">
      </span><span class="nt">"summary"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
    </span><span class="p">},</span><span class="w">
</span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
</div>

<p>As you’ll notice in the response the <code class="highlighter-rouge">"@recordsetCount": 15,</code> means that for the example company I’ve created a total of 15 records have been returned. If you’d like to retrieve the full number of all records across all pages you may specify <code class="highlighter-rouge">$include=count</code>in your API call. Visit <a href="/developer-dot/avatax/filtering-in-rest/">Filtering in AvaTax REST v2 </a> for more information.</p>

<h4 id="estimating-tax">Estimating Tax</h4>

<p>Estimating tax has changed quite a bit from the previous v1 request:</p>

<p><code class="highlighter-rouge">GET //development.avalara.net/1.0/tax/{latitude},{longitude}/get</code></p>

<p>Rather than making a call such as this, we suggest using our transactions create endpoint but with a transaction <code class="highlighter-rouge">type</code> such as: <code class="highlighter-rouge">SalesOrder</code>, <code class="highlighter-rouge">ReturnOrder</code>, <code class="highlighter-rouge">PurchaseOrder</code>, and <code class="highlighter-rouge">InventoryTransferOrder</code>, that provide temporary documents which are great to use as a quote to estimate tax. Our v2 offers the seamless transition from an “Order” type to an “Invoice” type transaction that will be maintained, all it takes is the simple modification of one or two parameters, depending on whether you’re ready to <code class="highlighter-rouge">commit</code> the transaction <code class="highlighter-rouge">type</code> or not. Another nifty feature of our REST v2 is that you can make a call to get all the tax rates for whatever region you may intend to do business in. For instance if you wanted to make a sale to someone in Indian Wells, California, you’d be able to see the rate breakdown for that city with requests like the following.</p>

<p><strong>v2 Request:</strong></p>

<p>You can use either:</p>

<p><code class="highlighter-rouge">GET //sandbox-rest.avatax.com/api/v2/taxrates/bypostalcode?postalCode=92210&amp;country=US</code></p>

<p>Or:</p>

<p><code class="highlighter-rouge">GET //sandbox-rest.avatax.com/api/v2/taxrates/byaddress?line1=123%20Main%20Street&amp;city=Indian Wells&amp;region=CA&amp;postalCode=92210&amp;country=US</code></p>

<p>The response will be a full breakdown of the rates by jurisdiction.</p>

<p><strong>v2 Response:</strong></p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"totalRate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0775</span><span class="p">,</span><span class="w">
  </span><span class="nt">"rates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0025</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CA COUNTY TAX"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"County"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.06</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CA STATE TAX"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"State"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.005</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CA SPECIAL TAX"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Special"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CA SPECIAL TAX"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Special"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="voiding-documents">Voiding Documents</h4>

<p>These are the two endpoints for voiding documents, also, its worth looking into one of the additions to the REST v2 API here as it should assist the workflow related to voiding and adjusting transactions.</p>

<p><strong>v1 Request:</strong></p>

<p><code class="highlighter-rouge">POST //development.avalara.net/1.0/tax/cancel</code></p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"CancelCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DocVoided"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"CompanyCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"DocCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SalesInvoice"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"DocType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SalesInvoice"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
</div>

<p><strong>v2 Request:</strong></p>

<p><code class="highlighter-rouge">POST //sandbox-rest.avatax.com/api/v2/companies/{companyCode}/transactions/{transactionCode}/void</code></p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">

    </span><span class="nt">"companyCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">555</span><span class="p">,</span><span class="w">
    </span><span class="nt">"transactionCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5555555aa-5aa5-5a55-a555-55a555a5555a"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DocVoided"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>In case you’re looking to adjust a transaction, we’ve included a separate enpoint just for that. For example, if a customer at a grocery store realized the can of soup they just bought had some serious dents in it and you decided to lower the price due to the cans condition. You might make a request like this.</p>

<p><strong>v2 Request:</strong></p>

<p><code class="highlighter-rouge">POST //sandbox-rest.avatax.com/api/v2/companies/{companyCode}/transactions/{transactionCode}/adjust</code></p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"adjustmentReason"</span><span class="p">:</span><span class="s2">"PriceAdjusted"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"adjustmentDescription"</span><span class="p">:</span><span class="s2">"Lowered Price for Damage"</span><span class="p">,</span><span class="w">

  </span><span class="nt">"newtransaction"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"companyCode"</span><span class="p">:</span><span class="s2">"555"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customerCode"</span><span class="p">:</span><span class="s2">"CUST1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-09-15T00:00:00"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"lines"</span><span class="p">:[{</span><span class="w">
      </span><span class="nt">"number"</span><span class="p">:</span><span class="s2">"String1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"quantity"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
    </span><span class="p">}],</span><span class="w">
    </span><span class="nt">"addresses"</span><span class="p">:{</span><span class="w">
      </span><span class="nt">"SingleLocation"</span><span class="p">:{</span><span class="w">
        </span><span class="nt">"line1"</span><span class="p">:</span><span class="s2">"1100 2nd Ave"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"city"</span><span class="p">:</span><span class="s2">"Seattle"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"region"</span><span class="p">:</span><span class="s2">"WA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"postalCode"</span><span class="p">:</span><span class="s2">"98101"</span><span class="p">}</span><span class="w">

      </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>
<p>This has been included with voiding documents because if you wanted to cancel such an adjustment to the transaction you’d make a void request with the parameter <code class="highlighter-rouge">AdjustmentCancelled</code> for your <code class="highlighter-rouge">code</code> in place of <code class="highlighter-rouge">DocVoided</code> used above. Find the full list of potential <code class="highlighter-rouge">code</code> <a href="/developer-dot/avatax/voiding-documents/">parameters and their actions here</a>.</p>

<h4 id="address-validation">Address Validation</h4>

<p><strong>v1 Request:</strong></p>

<p><code class="highlighter-rouge">GET //development.avalara.net/1.0/address/validate</code></p>

<p><strong>v2 Requests:</strong></p>

<p>You can use either:</p>

<ul>
  <li>
    <p><code class="highlighter-rouge">POST //sandbox-rest.avatax.com/api/v2/addresses/resolve</code> or,</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">GET //sandbox-rest.avatax.com/api/v2/addresses/resolve</code> (Coming Soon)</p>
  </li>
</ul>

<p><strong>v2 Request:</strong></p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"line1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Main Street"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Indian Wells"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CA"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Both operate the same; the <code class="highlighter-rouge">GET</code> method was introduced for simplicity of integration.</p>

<h3 id="additional-v2-endpoints">Additional v2 Endpoints:</h3>

<h4 id="posting-companies-and-initialize">POSTing Companies (and Initialize)</h4>

<p>Something else the REST v1 could never do was create companies. This could only be done using the Onboarding API or through the Admin Console. Not only can the REST v2 create a new company, but you can create a company fully formed and ready for the calculation of tax in a single call to the API. Both of these are illustrated using the following two endpoints.</p>

<p><a href="/developer-dot/api-reference/avatax/rest/v2/methods/Companies/ApiV2CompaniesPost">Create New</a> <code class="highlighter-rouge">POST //sandbox-rest.avatax.com/api/v2/companies</code></p>

<p><a href="/developer-dot/api-reference/avatax/rest/v2/methods/Companies/ApiV2CompaniesInitializePost">Initialize</a> <code class="highlighter-rouge">POST //sandbox-rest.avatax.com/api/v2/companies/initialize</code></p>

<h4 id="try-our-definitions-endpoint">Try our Definitions Endpoint</h4>

<p>If you’re ever looking for information, the v2 has a new Definitions method, by using the assorted <code class="highlighter-rouge">GET //sandbox-rest.avatax.com/api/v2/definitions</code> endpoints you can retrieve parameter lists and definitions for these and more:</p>

<ul class="normal">
  <li><a href="/developer-dot/api-reference/avatax/rest/v2/methods/Definitions/ApiV2DefinitionsLocationquestionsGet">Tax Location Questions </a></li>
  <li><a href="/developer-dot/api-reference/avatax/rest/v2/methods/Definitions/ApiV2DefinitionsNexusGet">Nexus</a></li>
  <li><a href="/developer-dot/api-reference/avatax/rest/v2/methods/Definitions/ApiV2DefinitionsParametersGet">Transactions</a></li>
  <li><a href="/developer-dot/api-reference/avatax/rest/v2/methods/Definitions/ApiV2DefinitionsPermissionsGet">Permissions</a></li>
  <li><a href="/developer-dot/api-reference/avatax/rest/v2/methods/Definitions/ApiV2DefinitionsSubscriptiontypesGet">Subscriptions</a></li>
  <li><a href="/developer-dot/api-reference/avatax/rest/v2/methods/Definitions/ApiV2DefinitionsTaxauthoritiesGet">Tax Authorities</a></li>
  <li><a href="/developer-dot/api-reference/avatax/rest/v2/methods/Definitions/ApiV2DefinitionsTaxcodesGet">Tax Codes</a></li>
</ul>

<p>We’ve been working hard here at Avalara to fine tune our AvaTax REST v2 API to provide you with the best possible service. These are just a handful of the improvements made in our REST v2, go here to view our entire <a href="/developer-dot/api-reference/avatax/rest/v2/">API reference documentation</a>. Hopefully this will help guide you along in the transition from our v1 to v2.</p>
</p>
    <p class="btn-callout"><a href="/developer-dot/blog" role="button">Back to posts</a></p>
    <div>
        <div>
    <!-- Begin MailChimp Signup Form -->
<link href="/developer-dot//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
	/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://avalara.us17.list-manage.com/subscribe/post?u=e2114eae65572ca4675c4ae37&amp;id=a37ce2da48" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    <label for="mce-EMAIL">Want updates on the lastest blog posts? Sign up for our newsletter.</label>
    <div class="input-group">
        <input type="email" value="" name="EMAIL" class="form-control" id="mce-EMAIL" placeholder="Email Address" required/>
        <span class="input-group-btn">
            <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-default button"/>
        </span>
        <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
        <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_e2114eae65572ca4675c4ae37_a37ce2da48" tabindex="-1" value=""></div>
    </div>
    </div>
</form>
</div>

<!--End mc_embed_signup-->
</div>
    </div>
</div>

    
</main>
        </section>
         
        <section class="row padding-sides">
            <main class="col-md-12"><div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'developeravalaracom'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</main>
        </section>
        
    </div>
    <footer>
        <ul class="global">
            <li><a href="https://www.avalara.com/"><span class="icon-sphere"></span>Avalara.com</a></li>
            <li><a href="https://help.avalara.com/"><span class="icon-help"></span>Help Center</a></li>
        </ul>


        <ul class="social">
            <li class="twitter"><a href="https://twitter.com/avadev">Twitter</a></li>
            <li class="facebook"><a href="https://www.facebook.com/avalara">Facebook</a></li>
            <li class="linkedin"><a href="https://www.linkedin.com/company/avalara">LinkedIn</a></li>
            <li class="youtube"><a href="https://www.youtube.com/user/Avalara1">Youtube</a></li>
        </ul>
        
        


        <ul class="legal">
            <li>&copy; 2017 Avalara, Inc. All rights reserved</li>
            <li><a href="https://www.avalara.com/site-terms/">Terms of use</a></li>
            <li><a href="https://www.avalara.com/privacy-policy/">Privacy policy</a></li>
        </ul>

        <ul class="github">
            <li class="social github-icon"><a href="https://github.com/Avalara/developer-dot/edit/master/_posts/2017-01-05-from-rest-v1-to-rest-v2.md"><span>GH</span> Edit this page on GitHub</a></li>

        </ul>
    </footer>

    <script src="/developer-dot/public/js/vendor/jquery-2.2.4.min.js"></script>
    <script src="/developer-dot/public/js/vendor/bootstrap.min.js"></script>
    <script src="/developer-dot/public/js/site.js"></script>

    
    <script src="/developer-dot/public/js/vendor/aws-sdk-2.5.3.min.js"></script>
    <script>
        AWS.config.region = 'us-west-2';
    </script>

     

    <!-- Adobe Dynamic Tag Manager -->
    <script type="text/javascript">
        _satellite.pageBottom();
    </script>
    <!-- End Adobe Dynamic Tag Manager -->
</body>

</html>
